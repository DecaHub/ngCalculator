"use strict";

angular.module("grids").service("BoardGridService", function () {

	var emptyBoard = true;

	var numberStack = [];

	var currentNumber = null;
	var currentOperation = null;
	var currentOperationResult = null;

	var decimalCreated = false;

	var inputDirty = false;

	if (emptyBoard) {

		currentNumber = "0";
	}

	var isInt = function isInt(num) {

		return num % 1 === 1;
	};

	this.appendDigit = function (digit) {

		/**
   * currentNumber = "" -> prepares board to remove placeholder numbers
   * when a new number sequence is detected
   */

		if (emptyBoard) {

			currentNumber = "";
			emptyBoard = false;
		}

		if (!inputDirty) {

			if (digit === 0) {

				currentNumber = 0;

				return;
			} else if (digit === "." && !decimalCreated) {

				currentNumber = "0.";
				inputDirty = true;
				decimalCreated = true;
				return;
			}

			currentNumber = "";
		}

		if (digit === "." && !decimalCreated) {

			decimalCreated = true;
		} else if (digit === ".") {

			return;
		}

		/**
   * The current number has to be created as a string, or else,
   * if you add the (-) sign in the middle of keying a number
   * the number after the (-) will trigger an operation.
   */

		currentNumber += digit.toString();

		console.log("currentNumber: " + currentNumber);

		inputDirty = true;
	};

	this.getCurrentNumber = function () {

		return currentNumber;
	};

	var executeOperation = function executeOperation() {

		console.log("Executing " + currentOperation);

		var digitA = numberStack.shift();
		var digitB = numberStack.shift();

		switch (currentOperation) {

			case "addition":

				if (!isInt(digitA) || !isInt(digitB)) {

					currentOperationResult = parseFloat(digitA) + digitB;
				} else {

					currentOperationResult = digitA + digitB;
				}

				break;
			case "subtraction":

				if (!isInt(digitA) || !isInt(digitB)) {

					currentOperationResult = parseFloat(digitA) - digitB;
				} else {

					currentOperationResult = digitA - digitB;
				}

				break;
			case "multiplication":

				if (!isInt(digitA) || !isInt(digitB)) {

					currentOperationResult = parseFloat(digitA) * digitB;
				} else {

					currentOperationResult = digitA * digitB;
				}

				break;
			case "division":

				if (!isInt(digitA) || !isInt(digitB)) {

					currentOperationResult = parseFloat(digitA) / digitB;
				} else {

					currentOperationResult = digitA / digitB;
				}

				break;

			case "percentage":

				if (digitB === undefined) {

					currentOperationResult = parseFloat(digitA / 100);
				} else {

					numberStack.push(Number(digitA));
					numberStack.push(parseFloat(digitA * parseFloat(digitB / 100)));

					return;
				}

				break;

			default:
				console.log("Operation " + currentOperation + " has not been created.");

		}

		if (isInt(currentOperationResult)) {

			console.log("Result is an integer!");
		} else {

			console.log("Result is a float!");

			if (currentOperationResult) {

				console.log(currentOperationResult);

				if (currentOperationResult.toString().length > 16) {

					currentOperationResult = parseFloat(currentOperationResult).toFixed(14);
				}
			}
		}

		console.log("Result: " + currentOperationResult);

		currentNumber = currentOperationResult;
	};

	this.setCurrentOperation = function (op) {

		if (op === "resultant") {

			if (numberStack === 2) {

				executeOperation();

				numberStack.push(Number(currentNumber));

				console.log(numberStack);

				inputDirty = false;
			}
		}

		/**
   * If there is nothing in numberStack & there is no input, do nothing
   * If there is nothing in numberStack & there is input, define an operation
   */

		if (numberStack.length === 0 && !inputDirty) {

			console.log("There is nothing to operate on");
		} else if (numberStack.length === 0 && inputDirty) {

			console.log("There is something to put in the stack!");

			currentOperation = op;

			numberStack.push(Number(currentNumber));
			console.log(numberStack);
			inputDirty = false;
		}

		/** If there is one element in numberStack & there is no input,
   * define an operation or allow to switch operations
   * If there is one element in numberStack & there is input,
   * push the input into numberStack
   */

		if (numberStack.length === 1 && !inputDirty) {

			console.log("There is an element in the stack");
			currentOperation = op;
			console.log(currentOperation);

			if (op === "percentage") {

				executeOperation();
				numberStack.push(Number(currentNumber));
			}
		} else if (numberStack.length === 1 && inputDirty) {

			numberStack.push(Number(currentNumber));
			console.log(numberStack);
			inputDirty = false;

			/**
    * This will make the execution block to run.
    * The operation that was assigned to trigger the execution
    * will be stored after the execution is done as it will
    * leave one element in the stack ready to an operation
    */
		}

		/**
   * If there are two elements in numberStack,
   * execute the current operation
   */

		if (numberStack.length === 2) {

			console.log("Execute Operation");

			/**
    * The current operation could change prior to computation
    * when using the percentage operator (%) as a binary operator
    */

			if (op === "percentage") {

				var ongoingOp = currentOperation;

				currentOperation = op;
				executeOperation();

				currentOperation = ongoingOp;
				executeOperation();

				numberStack.push(Number(currentNumber));

				return;
			}

			executeOperation();

			// Operation is complete. Add result to numberStack

			numberStack.push(Number(currentNumber));

			console.log(numberStack);

			currentOperation = op;
			console.log(currentOperation);
		}
	};

	this.clearBoard = function () {

		console.log("CLEAR");

		emptyBoard = true;

		numberStack.length = 0;

		currentNumber = 0;
		currentOperation = null;
		currentOperationResult = null;

		decimalCreated = false;

		inputDirty = false;
	};

	this.flipSign = function () {

		console.log("flipSign");

		if (currentNumber == 0 || emptyBoard) {

			/**
    * Avoid NaN
    */

			return;
		}

		if (numberStack.length === 1 && !inputDirty) {

			var tempNum = numberStack.pop();

			currentNumber = tempNum * -1;

			numberStack.push(Number(currentNumber));
		} else {

			console.log(numberStack);

			currentNumber = currentNumber * -1;
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdyaWRzL2JvYXJkR3JpZC5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJzZXJ2aWNlIiwiZW1wdHlCb2FyZCIsIm51bWJlclN0YWNrIiwiY3VycmVudE51bWJlciIsImN1cnJlbnRPcGVyYXRpb24iLCJjdXJyZW50T3BlcmF0aW9uUmVzdWx0IiwiZGVjaW1hbENyZWF0ZWQiLCJpbnB1dERpcnR5IiwiaXNJbnQiLCJudW0iLCJhcHBlbmREaWdpdCIsImRpZ2l0IiwidG9TdHJpbmciLCJjb25zb2xlIiwibG9nIiwiZ2V0Q3VycmVudE51bWJlciIsImV4ZWN1dGVPcGVyYXRpb24iLCJkaWdpdEEiLCJzaGlmdCIsImRpZ2l0QiIsInBhcnNlRmxvYXQiLCJ1bmRlZmluZWQiLCJwdXNoIiwiTnVtYmVyIiwibGVuZ3RoIiwidG9GaXhlZCIsInNldEN1cnJlbnRPcGVyYXRpb24iLCJvcCIsIm9uZ29pbmdPcCIsImNsZWFyQm9hcmQiLCJmbGlwU2lnbiIsInRlbXBOdW0iLCJwb3AiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBQSxRQUFRQyxNQUFSLENBQWUsT0FBZixFQUNFQyxPQURGLENBQ1Usa0JBRFYsRUFDOEIsWUFBWTs7QUFFeEMsS0FBSUMsYUFBYSxJQUFqQjs7QUFFQSxLQUFNQyxjQUFjLEVBQXBCOztBQUVBLEtBQUlDLGdCQUFnQixJQUFwQjtBQUNBLEtBQUlDLG1CQUFtQixJQUF2QjtBQUNBLEtBQUlDLHlCQUF5QixJQUE3Qjs7QUFFQSxLQUFJQyxpQkFBaUIsS0FBckI7O0FBRUEsS0FBSUMsYUFBYSxLQUFqQjs7QUFHQSxLQUFJTixVQUFKLEVBQWdCOztBQUVmRSxrQkFBZ0IsR0FBaEI7QUFFQTs7QUFFRCxLQUFJSyxRQUFRLFNBQVJBLEtBQVEsQ0FBVUMsR0FBVixFQUFlOztBQUUxQixTQUFPQSxNQUFNLENBQU4sS0FBWSxDQUFuQjtBQUVBLEVBSkQ7O0FBT0EsTUFBS0MsV0FBTCxHQUFtQixVQUFVQyxLQUFWLEVBQWlCOztBQUVuQzs7Ozs7QUFNQSxNQUFJVixVQUFKLEVBQWdCOztBQUVmRSxtQkFBZ0IsRUFBaEI7QUFDQUYsZ0JBQWEsS0FBYjtBQUVBOztBQUVELE1BQUksQ0FBQ00sVUFBTCxFQUFpQjs7QUFFaEIsT0FBSUksVUFBVSxDQUFkLEVBQWlCOztBQUVoQlIsb0JBQWdCLENBQWhCOztBQUVBO0FBRUEsSUFORCxNQU1PLElBQUlRLFVBQVUsR0FBVixJQUFpQixDQUFDTCxjQUF0QixFQUFzQzs7QUFFNUNILG9CQUFpQixJQUFqQjtBQUNBSSxpQkFBYSxJQUFiO0FBQ0FELHFCQUFpQixJQUFqQjtBQUNBO0FBRUE7O0FBRURILG1CQUFnQixFQUFoQjtBQUVBOztBQUVELE1BQUlRLFVBQVUsR0FBVixJQUFpQixDQUFDTCxjQUF0QixFQUFzQzs7QUFFckNBLG9CQUFpQixJQUFqQjtBQUVBLEdBSkQsTUFJTyxJQUFJSyxVQUFVLEdBQWQsRUFBbUI7O0FBRXpCO0FBRUE7O0FBRUQ7Ozs7OztBQU1BUixtQkFBaUJRLE1BQU1DLFFBQU4sRUFBakI7O0FBRUFDLFVBQVFDLEdBQVIscUJBQThCWCxhQUE5Qjs7QUFFQUksZUFBYSxJQUFiO0FBRUEsRUExREQ7O0FBNERBLE1BQUtRLGdCQUFMLEdBQXdCLFlBQVk7O0FBRW5DLFNBQU9aLGFBQVA7QUFFQSxFQUpEOztBQU1BLEtBQU1hLG1CQUFtQixTQUFuQkEsZ0JBQW1CLEdBQVk7O0FBRXBDSCxVQUFRQyxHQUFSLGdCQUF5QlYsZ0JBQXpCOztBQUVBLE1BQU1hLFNBQVNmLFlBQVlnQixLQUFaLEVBQWY7QUFDQSxNQUFNQyxTQUFTakIsWUFBWWdCLEtBQVosRUFBZjs7QUFFQSxVQUFRZCxnQkFBUjs7QUFFQyxRQUFLLFVBQUw7O0FBRUMsUUFBSSxDQUFDSSxNQUFNUyxNQUFOLENBQUQsSUFBa0IsQ0FBQ1QsTUFBTVcsTUFBTixDQUF2QixFQUFzQzs7QUFFckNkLDhCQUF5QmUsV0FBV0gsTUFBWCxJQUFxQkUsTUFBOUM7QUFFQSxLQUpELE1BSU87O0FBRU5kLDhCQUF5QlksU0FBU0UsTUFBbEM7QUFFQTs7QUFFRDtBQUNELFFBQUssYUFBTDs7QUFFQyxRQUFJLENBQUNYLE1BQU1TLE1BQU4sQ0FBRCxJQUFrQixDQUFDVCxNQUFNVyxNQUFOLENBQXZCLEVBQXNDOztBQUVyQ2QsOEJBQXlCZSxXQUFXSCxNQUFYLElBQXFCRSxNQUE5QztBQUVBLEtBSkQsTUFJTzs7QUFFTmQsOEJBQXlCWSxTQUFTRSxNQUFsQztBQUVBOztBQUVEO0FBQ0QsUUFBSyxnQkFBTDs7QUFFQyxRQUFJLENBQUNYLE1BQU1TLE1BQU4sQ0FBRCxJQUFrQixDQUFDVCxNQUFNVyxNQUFOLENBQXZCLEVBQXNDOztBQUVyQ2QsOEJBQXlCZSxXQUFXSCxNQUFYLElBQXFCRSxNQUE5QztBQUVBLEtBSkQsTUFJTzs7QUFFTmQsOEJBQXlCWSxTQUFTRSxNQUFsQztBQUVBOztBQUVEO0FBQ0QsUUFBSyxVQUFMOztBQUVDLFFBQUksQ0FBQ1gsTUFBTVMsTUFBTixDQUFELElBQWtCLENBQUNULE1BQU1XLE1BQU4sQ0FBdkIsRUFBc0M7O0FBRXJDZCw4QkFBeUJlLFdBQVdILE1BQVgsSUFBcUJFLE1BQTlDO0FBRUEsS0FKRCxNQUlPOztBQUVOZCw4QkFBeUJZLFNBQVNFLE1BQWxDO0FBRUE7O0FBRUQ7O0FBRUQsUUFBSyxZQUFMOztBQUVDLFFBQUlBLFdBQVdFLFNBQWYsRUFBMEI7O0FBRXpCaEIsOEJBQXlCZSxXQUFXSCxTQUFTLEdBQXBCLENBQXpCO0FBRUEsS0FKRCxNQUlPOztBQUVOZixpQkFBWW9CLElBQVosQ0FBaUJDLE9BQU9OLE1BQVAsQ0FBakI7QUFDQWYsaUJBQVlvQixJQUFaLENBQWlCRixXQUFXSCxTQUFTRyxXQUFXRCxTQUFTLEdBQXBCLENBQXBCLENBQWpCOztBQUVBO0FBRUE7O0FBRUQ7O0FBRUQ7QUFDQ04sWUFBUUMsR0FBUixnQkFBeUJWLGdCQUF6Qjs7QUF6RUY7O0FBOEVBLE1BQUlJLE1BQU1ILHNCQUFOLENBQUosRUFBbUM7O0FBRWxDUSxXQUFRQyxHQUFSO0FBRUEsR0FKRCxNQUlPOztBQUVORCxXQUFRQyxHQUFSOztBQUVBLE9BQUlULHNCQUFKLEVBQTRCOztBQUUzQlEsWUFBUUMsR0FBUixDQUFZVCxzQkFBWjs7QUFFQSxRQUFJQSx1QkFBdUJPLFFBQXZCLEdBQWtDWSxNQUFsQyxHQUEyQyxFQUEvQyxFQUFtRDs7QUFFbERuQiw4QkFBeUJlLFdBQVdmLHNCQUFYLEVBQW1Db0IsT0FBbkMsQ0FBMkMsRUFBM0MsQ0FBekI7QUFFQTtBQUVEO0FBRUQ7O0FBRURaLFVBQVFDLEdBQVIsY0FBdUJULHNCQUF2Qjs7QUFFQUYsa0JBQWdCRSxzQkFBaEI7QUFFQSxFQS9HRDs7QUFrSEEsTUFBS3FCLG1CQUFMLEdBQTJCLFVBQVVDLEVBQVYsRUFBYzs7QUFFeEMsTUFBSUEsT0FBTyxXQUFYLEVBQXdCOztBQUV2QixPQUFJekIsZ0JBQWdCLENBQXBCLEVBQXVCOztBQUV0QmM7O0FBRUFkLGdCQUFZb0IsSUFBWixDQUFpQkMsT0FBT3BCLGFBQVAsQ0FBakI7O0FBRUFVLFlBQVFDLEdBQVIsQ0FBWVosV0FBWjs7QUFFQUssaUJBQWEsS0FBYjtBQUVBO0FBRUQ7O0FBRUQ7Ozs7O0FBS0EsTUFBSUwsWUFBWXNCLE1BQVosS0FBdUIsQ0FBdkIsSUFBNEIsQ0FBQ2pCLFVBQWpDLEVBQTZDOztBQUU1Q00sV0FBUUMsR0FBUixDQUFZLGdDQUFaO0FBRUEsR0FKRCxNQUlPLElBQUlaLFlBQVlzQixNQUFaLEtBQXVCLENBQXZCLElBQTRCakIsVUFBaEMsRUFBNEM7O0FBRWxETSxXQUFRQyxHQUFSLENBQVkseUNBQVo7O0FBRUFWLHNCQUFtQnVCLEVBQW5COztBQUVBekIsZUFBWW9CLElBQVosQ0FBaUJDLE9BQU9wQixhQUFQLENBQWpCO0FBQ0FVLFdBQVFDLEdBQVIsQ0FBWVosV0FBWjtBQUNBSyxnQkFBYSxLQUFiO0FBRUE7O0FBRUQ7Ozs7OztBQU1BLE1BQUlMLFlBQVlzQixNQUFaLEtBQXVCLENBQXZCLElBQTRCLENBQUNqQixVQUFqQyxFQUE2Qzs7QUFFNUNNLFdBQVFDLEdBQVIsQ0FBWSxrQ0FBWjtBQUNBVixzQkFBbUJ1QixFQUFuQjtBQUNBZCxXQUFRQyxHQUFSLENBQVlWLGdCQUFaOztBQUVBLE9BQUl1QixPQUFPLFlBQVgsRUFBeUI7O0FBRXhCWDtBQUNBZCxnQkFBWW9CLElBQVosQ0FBaUJDLE9BQU9wQixhQUFQLENBQWpCO0FBRUE7QUFFRCxHQWJELE1BYU8sSUFBSUQsWUFBWXNCLE1BQVosS0FBdUIsQ0FBdkIsSUFBNEJqQixVQUFoQyxFQUE0Qzs7QUFFbERMLGVBQVlvQixJQUFaLENBQWlCQyxPQUFPcEIsYUFBUCxDQUFqQjtBQUNBVSxXQUFRQyxHQUFSLENBQVlaLFdBQVo7QUFDQUssZ0JBQWEsS0FBYjs7QUFFQTs7Ozs7O0FBT0E7O0FBRUQ7Ozs7O0FBS0EsTUFBSUwsWUFBWXNCLE1BQVosS0FBdUIsQ0FBM0IsRUFBOEI7O0FBRTdCWCxXQUFRQyxHQUFSLENBQVksbUJBQVo7O0FBRUE7Ozs7O0FBS0EsT0FBSWEsT0FBTyxZQUFYLEVBQXlCOztBQUV4QixRQUFJQyxZQUFZeEIsZ0JBQWhCOztBQUVBQSx1QkFBbUJ1QixFQUFuQjtBQUNBWDs7QUFFQVosdUJBQW1Cd0IsU0FBbkI7QUFDQVo7O0FBRUFkLGdCQUFZb0IsSUFBWixDQUFpQkMsT0FBT3BCLGFBQVAsQ0FBakI7O0FBRUE7QUFFQTs7QUFHRGE7O0FBRUE7O0FBRUFkLGVBQVlvQixJQUFaLENBQWlCQyxPQUFPcEIsYUFBUCxDQUFqQjs7QUFFQVUsV0FBUUMsR0FBUixDQUFZWixXQUFaOztBQUVBRSxzQkFBbUJ1QixFQUFuQjtBQUNBZCxXQUFRQyxHQUFSLENBQVlWLGdCQUFaO0FBRUE7QUFFRCxFQXJIRDs7QUF1SEEsTUFBS3lCLFVBQUwsR0FBa0IsWUFBWTs7QUFFN0JoQixVQUFRQyxHQUFSLENBQVksT0FBWjs7QUFFQWIsZUFBYSxJQUFiOztBQUVBQyxjQUFZc0IsTUFBWixHQUFxQixDQUFyQjs7QUFFQXJCLGtCQUFnQixDQUFoQjtBQUNBQyxxQkFBbUIsSUFBbkI7QUFDQUMsMkJBQXlCLElBQXpCOztBQUVBQyxtQkFBaUIsS0FBakI7O0FBRUFDLGVBQWEsS0FBYjtBQUVBLEVBaEJEOztBQWtCQSxNQUFLdUIsUUFBTCxHQUFnQixZQUFZOztBQUUzQmpCLFVBQVFDLEdBQVIsQ0FBWSxVQUFaOztBQUVBLE1BQUlYLGlCQUFpQixDQUFqQixJQUFzQkYsVUFBMUIsRUFBc0M7O0FBRXJDOzs7O0FBSUE7QUFFQTs7QUFHRCxNQUFJQyxZQUFZc0IsTUFBWixLQUF1QixDQUF2QixJQUE0QixDQUFDakIsVUFBakMsRUFBNkM7O0FBRTVDLE9BQUl3QixVQUFVN0IsWUFBWThCLEdBQVosRUFBZDs7QUFFQTdCLG1CQUFnQjRCLFVBQVUsQ0FBQyxDQUEzQjs7QUFFQTdCLGVBQVlvQixJQUFaLENBQWlCQyxPQUFPcEIsYUFBUCxDQUFqQjtBQUVBLEdBUkQsTUFRTzs7QUFFTlUsV0FBUUMsR0FBUixDQUFZWixXQUFaOztBQUVBQyxtQkFBZ0JBLGdCQUFnQixDQUFDLENBQWpDO0FBRUE7QUFFRCxFQS9CRDtBQWlDQSxDQTNYRiIsImZpbGUiOiJncmlkcy9ib2FyZEdyaWQuc2VydmljZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5hbmd1bGFyLm1vZHVsZShcImdyaWRzXCIpXG5cdC5zZXJ2aWNlKFwiQm9hcmRHcmlkU2VydmljZVwiLCBmdW5jdGlvbiAoKSB7XG5cdFx0XG5cdFx0bGV0IGVtcHR5Qm9hcmQgPSB0cnVlO1xuXHRcdFxuXHRcdGNvbnN0IG51bWJlclN0YWNrID0gW107XG5cdFx0XG5cdFx0bGV0IGN1cnJlbnROdW1iZXIgPSBudWxsO1xuXHRcdGxldCBjdXJyZW50T3BlcmF0aW9uID0gbnVsbDtcblx0XHRsZXQgY3VycmVudE9wZXJhdGlvblJlc3VsdCA9IG51bGw7XG5cdFx0XG5cdFx0bGV0IGRlY2ltYWxDcmVhdGVkID0gZmFsc2U7XG5cdFx0XG5cdFx0bGV0IGlucHV0RGlydHkgPSBmYWxzZTtcblx0XHRcblx0XHRcblx0XHRpZiAoZW1wdHlCb2FyZCkge1xuXHRcdFx0XG5cdFx0XHRjdXJyZW50TnVtYmVyID0gXCIwXCI7XG5cdFx0XHRcblx0XHR9XG5cdFx0XG5cdFx0bGV0IGlzSW50ID0gZnVuY3Rpb24gKG51bSkge1xuXHRcdFx0XG5cdFx0XHRyZXR1cm4gbnVtICUgMSA9PT0gMTtcblx0XHRcdFxuXHRcdH07XG5cdFx0XG5cdFx0XG5cdFx0dGhpcy5hcHBlbmREaWdpdCA9IGZ1bmN0aW9uIChkaWdpdCkge1xuXHRcdFx0XG5cdFx0XHQvKipcblx0XHRcdCAqIGN1cnJlbnROdW1iZXIgPSBcIlwiIC0+IHByZXBhcmVzIGJvYXJkIHRvIHJlbW92ZSBwbGFjZWhvbGRlciBudW1iZXJzXG5cdFx0XHQgKiB3aGVuIGEgbmV3IG51bWJlciBzZXF1ZW5jZSBpcyBkZXRlY3RlZFxuXHRcdFx0ICovXG5cdFx0XHRcblx0XHRcdFxuXHRcdFx0aWYgKGVtcHR5Qm9hcmQpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGN1cnJlbnROdW1iZXIgPSBcIlwiO1xuXHRcdFx0XHRlbXB0eUJvYXJkID0gZmFsc2U7XG5cdFx0XHRcdFxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZiAoIWlucHV0RGlydHkpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGlmIChkaWdpdCA9PT0gMCkge1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGN1cnJlbnROdW1iZXIgPSAwO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcblx0XHRcdFx0fSBlbHNlIGlmIChkaWdpdCA9PT0gXCIuXCIgJiYgIWRlY2ltYWxDcmVhdGVkKSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y3VycmVudE51bWJlciA9ICBcIjAuXCI7XG5cdFx0XHRcdFx0aW5wdXREaXJ0eSA9IHRydWU7XG5cdFx0XHRcdFx0ZGVjaW1hbENyZWF0ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Y3VycmVudE51bWJlciA9IFwiXCI7XG5cdFx0XHRcdFxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZiAoZGlnaXQgPT09IFwiLlwiICYmICFkZWNpbWFsQ3JlYXRlZCkge1xuXHRcdFx0XHRcblx0XHRcdFx0ZGVjaW1hbENyZWF0ZWQgPSB0cnVlO1xuXHRcdFx0XHRcblx0XHRcdH0gZWxzZSBpZiAoZGlnaXQgPT09IFwiLlwiKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvKipcblx0XHRcdCAqIFRoZSBjdXJyZW50IG51bWJlciBoYXMgdG8gYmUgY3JlYXRlZCBhcyBhIHN0cmluZywgb3IgZWxzZSxcblx0XHRcdCAqIGlmIHlvdSBhZGQgdGhlICgtKSBzaWduIGluIHRoZSBtaWRkbGUgb2Yga2V5aW5nIGEgbnVtYmVyXG5cdFx0XHQgKiB0aGUgbnVtYmVyIGFmdGVyIHRoZSAoLSkgd2lsbCB0cmlnZ2VyIGFuIG9wZXJhdGlvbi5cblx0XHRcdCAqL1xuXHRcdFx0XG5cdFx0XHRjdXJyZW50TnVtYmVyICs9IGRpZ2l0LnRvU3RyaW5nKCk7XG5cdFx0XHRcblx0XHRcdGNvbnNvbGUubG9nKGBjdXJyZW50TnVtYmVyOiAke2N1cnJlbnROdW1iZXJ9YCk7XG5cdFx0XHRcblx0XHRcdGlucHV0RGlydHkgPSB0cnVlO1xuXHRcdFx0XG5cdFx0fTtcblx0XHRcblx0XHR0aGlzLmdldEN1cnJlbnROdW1iZXIgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHJldHVybiBjdXJyZW50TnVtYmVyO1xuXG5cdFx0fTtcblx0XHRcblx0XHRjb25zdCBleGVjdXRlT3BlcmF0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XG5cdFx0XHRjb25zb2xlLmxvZyhgRXhlY3V0aW5nICR7Y3VycmVudE9wZXJhdGlvbn1gKTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgZGlnaXRBID0gbnVtYmVyU3RhY2suc2hpZnQoKTtcblx0XHRcdGNvbnN0IGRpZ2l0QiA9IG51bWJlclN0YWNrLnNoaWZ0KCk7XG5cdFx0XHRcblx0XHRcdHN3aXRjaCAoY3VycmVudE9wZXJhdGlvbikge1xuXHRcdFx0XHRcblx0XHRcdFx0Y2FzZSBcImFkZGl0aW9uXCI6XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKCFpc0ludChkaWdpdEEpIHx8ICFpc0ludChkaWdpdEIpKSB7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGN1cnJlbnRPcGVyYXRpb25SZXN1bHQgPSBwYXJzZUZsb2F0KGRpZ2l0QSkgKyBkaWdpdEI7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRjdXJyZW50T3BlcmF0aW9uUmVzdWx0ID0gZGlnaXRBICsgZGlnaXRCO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwic3VidHJhY3Rpb25cIjpcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAoIWlzSW50KGRpZ2l0QSkgfHwgIWlzSW50KGRpZ2l0QikpIHtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Y3VycmVudE9wZXJhdGlvblJlc3VsdCA9IHBhcnNlRmxvYXQoZGlnaXRBKSAtIGRpZ2l0Qjtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGN1cnJlbnRPcGVyYXRpb25SZXN1bHQgPSBkaWdpdEEgLSBkaWdpdEI7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJtdWx0aXBsaWNhdGlvblwiOlxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmICghaXNJbnQoZGlnaXRBKSB8fCAhaXNJbnQoZGlnaXRCKSkge1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRjdXJyZW50T3BlcmF0aW9uUmVzdWx0ID0gcGFyc2VGbG9hdChkaWdpdEEpICogZGlnaXRCO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Y3VycmVudE9wZXJhdGlvblJlc3VsdCA9IGRpZ2l0QSAqIGRpZ2l0Qjtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcImRpdmlzaW9uXCI6XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKCFpc0ludChkaWdpdEEpIHx8ICFpc0ludChkaWdpdEIpKSB7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGN1cnJlbnRPcGVyYXRpb25SZXN1bHQgPSBwYXJzZUZsb2F0KGRpZ2l0QSkgLyBkaWdpdEI7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRjdXJyZW50T3BlcmF0aW9uUmVzdWx0ID0gZGlnaXRBIC8gZGlnaXRCO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRjYXNlIFwicGVyY2VudGFnZVwiOlxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChkaWdpdEIgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRjdXJyZW50T3BlcmF0aW9uUmVzdWx0ID0gcGFyc2VGbG9hdChkaWdpdEEgLyAxMDApO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0bnVtYmVyU3RhY2sucHVzaChOdW1iZXIoZGlnaXRBKSk7XG5cdFx0XHRcdFx0XHRudW1iZXJTdGFjay5wdXNoKHBhcnNlRmxvYXQoZGlnaXRBICogcGFyc2VGbG9hdChkaWdpdEIgLyAxMDApKSk7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhgT3BlcmF0aW9uICR7Y3VycmVudE9wZXJhdGlvbn0gaGFzIG5vdCBiZWVuIGNyZWF0ZWQuYCk7XG5cdFx0XHRcdFx0XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdFxuXHRcdFx0aWYgKGlzSW50KGN1cnJlbnRPcGVyYXRpb25SZXN1bHQpKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZyhgUmVzdWx0IGlzIGFuIGludGVnZXIhYCk7XG5cdFx0XHRcdFxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKGBSZXN1bHQgaXMgYSBmbG9hdCFgKTtcblx0XHRcdFx0XG5cdFx0XHRcdGlmIChjdXJyZW50T3BlcmF0aW9uUmVzdWx0KSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coY3VycmVudE9wZXJhdGlvblJlc3VsdCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKGN1cnJlbnRPcGVyYXRpb25SZXN1bHQudG9TdHJpbmcoKS5sZW5ndGggPiAxNikge1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRjdXJyZW50T3BlcmF0aW9uUmVzdWx0ID0gcGFyc2VGbG9hdChjdXJyZW50T3BlcmF0aW9uUmVzdWx0KS50b0ZpeGVkKDE0KTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Y29uc29sZS5sb2coYFJlc3VsdDogJHtjdXJyZW50T3BlcmF0aW9uUmVzdWx0fWApO1xuXHRcdFx0XG5cdFx0XHRjdXJyZW50TnVtYmVyID0gY3VycmVudE9wZXJhdGlvblJlc3VsdDtcblx0XHRcdFxuXHRcdH07XG5cdFx0XG5cdFx0XG5cdFx0dGhpcy5zZXRDdXJyZW50T3BlcmF0aW9uID0gZnVuY3Rpb24gKG9wKSB7XG5cdFx0XHRcblx0XHRcdGlmIChvcCA9PT0gXCJyZXN1bHRhbnRcIikge1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKG51bWJlclN0YWNrID09PSAyKSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0ZXhlY3V0ZU9wZXJhdGlvbigpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdG51bWJlclN0YWNrLnB1c2goTnVtYmVyKGN1cnJlbnROdW1iZXIpKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhudW1iZXJTdGFjayk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aW5wdXREaXJ0eSA9IGZhbHNlO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvKipcblx0XHRcdCAqIElmIHRoZXJlIGlzIG5vdGhpbmcgaW4gbnVtYmVyU3RhY2sgJiB0aGVyZSBpcyBubyBpbnB1dCwgZG8gbm90aGluZ1xuXHRcdFx0ICogSWYgdGhlcmUgaXMgbm90aGluZyBpbiBudW1iZXJTdGFjayAmIHRoZXJlIGlzIGlucHV0LCBkZWZpbmUgYW4gb3BlcmF0aW9uXG5cdFx0XHQgKi9cblx0XHRcdFxuXHRcdFx0aWYgKG51bWJlclN0YWNrLmxlbmd0aCA9PT0gMCAmJiAhaW5wdXREaXJ0eSkge1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coXCJUaGVyZSBpcyBub3RoaW5nIHRvIG9wZXJhdGUgb25cIik7XG5cdFx0XHRcdFxuXHRcdFx0fSBlbHNlIGlmIChudW1iZXJTdGFjay5sZW5ndGggPT09IDAgJiYgaW5wdXREaXJ0eSkge1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coXCJUaGVyZSBpcyBzb21ldGhpbmcgdG8gcHV0IGluIHRoZSBzdGFjayFcIik7XG5cdFx0XHRcdFxuXHRcdFx0XHRjdXJyZW50T3BlcmF0aW9uID0gb3A7XG5cdFx0XHRcdFxuXHRcdFx0XHRudW1iZXJTdGFjay5wdXNoKE51bWJlcihjdXJyZW50TnVtYmVyKSk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKG51bWJlclN0YWNrKTtcblx0XHRcdFx0aW5wdXREaXJ0eSA9IGZhbHNlO1xuXHRcdFx0XHRcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0LyoqIElmIHRoZXJlIGlzIG9uZSBlbGVtZW50IGluIG51bWJlclN0YWNrICYgdGhlcmUgaXMgbm8gaW5wdXQsXG5cdFx0XHQgKiBkZWZpbmUgYW4gb3BlcmF0aW9uIG9yIGFsbG93IHRvIHN3aXRjaCBvcGVyYXRpb25zXG5cdFx0XHQgKiBJZiB0aGVyZSBpcyBvbmUgZWxlbWVudCBpbiBudW1iZXJTdGFjayAmIHRoZXJlIGlzIGlucHV0LFxuXHRcdFx0ICogcHVzaCB0aGUgaW5wdXQgaW50byBudW1iZXJTdGFja1xuXHRcdFx0ICovXG5cdFx0XHRcblx0XHRcdGlmIChudW1iZXJTdGFjay5sZW5ndGggPT09IDEgJiYgIWlucHV0RGlydHkpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiVGhlcmUgaXMgYW4gZWxlbWVudCBpbiB0aGUgc3RhY2tcIik7XG5cdFx0XHRcdGN1cnJlbnRPcGVyYXRpb24gPSBvcDtcblx0XHRcdFx0Y29uc29sZS5sb2coY3VycmVudE9wZXJhdGlvbik7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAob3AgPT09IFwicGVyY2VudGFnZVwiKSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0ZXhlY3V0ZU9wZXJhdGlvbigpO1xuXHRcdFx0XHRcdG51bWJlclN0YWNrLnB1c2goTnVtYmVyKGN1cnJlbnROdW1iZXIpKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdH0gZWxzZSBpZiAobnVtYmVyU3RhY2subGVuZ3RoID09PSAxICYmIGlucHV0RGlydHkpIHtcblx0XHRcdFx0XG5cdFx0XHRcdG51bWJlclN0YWNrLnB1c2goTnVtYmVyKGN1cnJlbnROdW1iZXIpKTtcblx0XHRcdFx0Y29uc29sZS5sb2cobnVtYmVyU3RhY2spO1xuXHRcdFx0XHRpbnB1dERpcnR5ID0gZmFsc2U7XG5cdFx0XHRcdFxuXHRcdFx0XHQvKipcblx0XHRcdFx0ICogVGhpcyB3aWxsIG1ha2UgdGhlIGV4ZWN1dGlvbiBibG9jayB0byBydW4uXG5cdFx0XHRcdCAqIFRoZSBvcGVyYXRpb24gdGhhdCB3YXMgYXNzaWduZWQgdG8gdHJpZ2dlciB0aGUgZXhlY3V0aW9uXG5cdFx0XHRcdCAqIHdpbGwgYmUgc3RvcmVkIGFmdGVyIHRoZSBleGVjdXRpb24gaXMgZG9uZSBhcyBpdCB3aWxsXG5cdFx0XHRcdCAqIGxlYXZlIG9uZSBlbGVtZW50IGluIHRoZSBzdGFjayByZWFkeSB0byBhbiBvcGVyYXRpb25cblx0XHRcdFx0ICovXG5cdFx0XHRcdFxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvKipcblx0XHRcdCAqIElmIHRoZXJlIGFyZSB0d28gZWxlbWVudHMgaW4gbnVtYmVyU3RhY2ssXG5cdFx0XHQgKiBleGVjdXRlIHRoZSBjdXJyZW50IG9wZXJhdGlvblxuXHRcdFx0ICovXG5cdFx0XHRcblx0XHRcdGlmIChudW1iZXJTdGFjay5sZW5ndGggPT09IDIpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiRXhlY3V0ZSBPcGVyYXRpb25cIik7XG5cdFx0XHRcdFxuXHRcdFx0XHQvKipcblx0XHRcdFx0ICogVGhlIGN1cnJlbnQgb3BlcmF0aW9uIGNvdWxkIGNoYW5nZSBwcmlvciB0byBjb21wdXRhdGlvblxuXHRcdFx0XHQgKiB3aGVuIHVzaW5nIHRoZSBwZXJjZW50YWdlIG9wZXJhdG9yICglKSBhcyBhIGJpbmFyeSBvcGVyYXRvclxuXHRcdFx0XHQgKi9cblx0XHRcdFx0XG5cdFx0XHRcdGlmIChvcCA9PT0gXCJwZXJjZW50YWdlXCIpIHtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRsZXQgb25nb2luZ09wID0gY3VycmVudE9wZXJhdGlvbjtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjdXJyZW50T3BlcmF0aW9uID0gb3A7XG5cdFx0XHRcdFx0ZXhlY3V0ZU9wZXJhdGlvbigpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGN1cnJlbnRPcGVyYXRpb24gPSBvbmdvaW5nT3A7XG5cdFx0XHRcdFx0ZXhlY3V0ZU9wZXJhdGlvbigpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdG51bWJlclN0YWNrLnB1c2goTnVtYmVyKGN1cnJlbnROdW1iZXIpKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdFxuXHRcdFx0XHRleGVjdXRlT3BlcmF0aW9uKCk7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBPcGVyYXRpb24gaXMgY29tcGxldGUuIEFkZCByZXN1bHQgdG8gbnVtYmVyU3RhY2tcblx0XHRcdFx0XG5cdFx0XHRcdG51bWJlclN0YWNrLnB1c2goTnVtYmVyKGN1cnJlbnROdW1iZXIpKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnNvbGUubG9nKG51bWJlclN0YWNrKTtcblx0XHRcdFx0XG5cdFx0XHRcdGN1cnJlbnRPcGVyYXRpb24gPSBvcDtcblx0XHRcdFx0Y29uc29sZS5sb2coY3VycmVudE9wZXJhdGlvbik7XG5cdFx0XHRcdFxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0fTtcblx0XHRcblx0XHR0aGlzLmNsZWFyQm9hcmQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcblx0XHRcdGNvbnNvbGUubG9nKFwiQ0xFQVJcIik7XG5cdFx0XHRcblx0XHRcdGVtcHR5Qm9hcmQgPSB0cnVlO1xuXHRcdFx0XG5cdFx0XHRudW1iZXJTdGFjay5sZW5ndGggPSAwO1xuXHRcdFx0XG5cdFx0XHRjdXJyZW50TnVtYmVyID0gMDtcblx0XHRcdGN1cnJlbnRPcGVyYXRpb24gPSBudWxsO1xuXHRcdFx0Y3VycmVudE9wZXJhdGlvblJlc3VsdCA9IG51bGw7XG5cdFx0XHRcblx0XHRcdGRlY2ltYWxDcmVhdGVkID0gZmFsc2U7XG5cdFx0XHRcblx0XHRcdGlucHV0RGlydHkgPSBmYWxzZTtcblx0XHRcdFxuXHRcdH07XG5cdFx0XG5cdFx0dGhpcy5mbGlwU2lnbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFxuXHRcdFx0Y29uc29sZS5sb2coXCJmbGlwU2lnblwiKTtcblx0XHRcdFxuXHRcdFx0aWYgKGN1cnJlbnROdW1iZXIgPT0gMCB8fCBlbXB0eUJvYXJkKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHQvKipcblx0XHRcdFx0ICogQXZvaWQgTmFOXG5cdFx0XHRcdCAqL1xuXHRcdFx0XHRcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0XG5cdFx0XHRpZiAobnVtYmVyU3RhY2subGVuZ3RoID09PSAxICYmICFpbnB1dERpcnR5KSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRsZXQgdGVtcE51bSA9IG51bWJlclN0YWNrLnBvcCgpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y3VycmVudE51bWJlciA9IHRlbXBOdW0gKiAtMTtcblx0XHRcdFx0XG5cdFx0XHRcdG51bWJlclN0YWNrLnB1c2goTnVtYmVyKGN1cnJlbnROdW1iZXIpKTtcblx0XHRcdFx0XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2cobnVtYmVyU3RhY2spO1xuXHRcdFx0XHRcblx0XHRcdFx0Y3VycmVudE51bWJlciA9IGN1cnJlbnROdW1iZXIgKiAtMTtcblx0XHRcdFx0XG5cdFx0XHR9XG5cdFx0XHRcblx0XHR9XG5cdFx0XG5cdH0pO1xuIl19
