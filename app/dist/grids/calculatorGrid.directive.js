"use strict";

angular.module("grids").directive("dhCalculatorGrid", ["$document", function ($document) {

	return {

		restrict: "E",
		templateUrl: "grids/calculatorGrid.template.html",
		link: function link(scope, element, attr) {

			var startX = 0;
			var startY = 0;
			var x = 0;
			var y = 0;

			var board = element.find("dh-board-grid");

			function mousemove(event) {

				y = event.pageY - startY;
				x = event.pageX - startX;

				element.css({

					top: y + "px",
					left: x + "px"

				});
			}

			function mouseup() {

				$document.off("mousemove", mousemove);
				$document.off("mouseup", mouseup);
			}

			board.css({

				cursor: "pointer"

			});

			element.css({

				/**
     * Must make the position of the element relative for the
     * resizing to occur. It is a direct style declaration on
     * the DOM element, not through a class.
     */
				position: "relative"

			});

			board.on("mousedown", function (event) {

				event.preventDefault();

				startX = event.pageX - x;
				startY = event.pageY - y;

				$document.on("mousemove", mousemove);
				$document.on("mouseup", mouseup);
			});
		}
	};
}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdyaWRzL2NhbGN1bGF0b3JHcmlkLmRpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiZGlyZWN0aXZlIiwiJGRvY3VtZW50IiwicmVzdHJpY3QiLCJ0ZW1wbGF0ZVVybCIsImxpbmsiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRyIiwic3RhcnRYIiwic3RhcnRZIiwieCIsInkiLCJib2FyZCIsImZpbmQiLCJtb3VzZW1vdmUiLCJldmVudCIsInBhZ2VZIiwicGFnZVgiLCJjc3MiLCJ0b3AiLCJsZWZ0IiwibW91c2V1cCIsIm9mZiIsImN1cnNvciIsInBvc2l0aW9uIiwib24iLCJwcmV2ZW50RGVmYXVsdCJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUFBLFFBQVFDLE1BQVIsQ0FBZSxPQUFmLEVBQ0VDLFNBREYsQ0FDWSxrQkFEWixFQUNnQyxDQUFDLFdBQUQsRUFBYyxVQUFVQyxTQUFWLEVBQXFCOztBQUVqRSxRQUFPOztBQUVOQyxZQUFVLEdBRko7QUFHTkMsZUFBYSxvQ0FIUDtBQUlOQyxRQUFNLGNBQVVDLEtBQVYsRUFBaUJDLE9BQWpCLEVBQTBCQyxJQUExQixFQUFnQzs7QUFFckMsT0FBSUMsU0FBUyxDQUFiO0FBQ0EsT0FBSUMsU0FBUyxDQUFiO0FBQ0EsT0FBSUMsSUFBSSxDQUFSO0FBQ0EsT0FBSUMsSUFBSSxDQUFSOztBQUVBLE9BQUlDLFFBQVFOLFFBQVFPLElBQVIsQ0FBYSxlQUFiLENBQVo7O0FBRUEsWUFBU0MsU0FBVCxDQUFvQkMsS0FBcEIsRUFBMkI7O0FBRTFCSixRQUFJSSxNQUFNQyxLQUFOLEdBQWNQLE1BQWxCO0FBQ0FDLFFBQUlLLE1BQU1FLEtBQU4sR0FBY1QsTUFBbEI7O0FBRUFGLFlBQVFZLEdBQVIsQ0FBWTs7QUFFWEMsVUFBS1IsSUFBSSxJQUZFO0FBR1hTLFdBQU1WLElBQUk7O0FBSEMsS0FBWjtBQU9BOztBQUVELFlBQVNXLE9BQVQsR0FBb0I7O0FBRW5CcEIsY0FBVXFCLEdBQVYsQ0FBYyxXQUFkLEVBQTJCUixTQUEzQjtBQUNBYixjQUFVcUIsR0FBVixDQUFjLFNBQWQsRUFBeUJELE9BQXpCO0FBRUE7O0FBRURULFNBQU1NLEdBQU4sQ0FBVTs7QUFFVEssWUFBUTs7QUFGQyxJQUFWOztBQU1BakIsV0FBUVksR0FBUixDQUFZOztBQUVYOzs7OztBQUtBTSxjQUFVOztBQVBDLElBQVo7O0FBV0FaLFNBQU1hLEVBQU4sQ0FBUyxXQUFULEVBQXNCLFVBQVVWLEtBQVYsRUFBaUI7O0FBRXRDQSxVQUFNVyxjQUFOOztBQUVBbEIsYUFBU08sTUFBTUUsS0FBTixHQUFjUCxDQUF2QjtBQUNBRCxhQUFTTSxNQUFNQyxLQUFOLEdBQWNMLENBQXZCOztBQUVBVixjQUFVd0IsRUFBVixDQUFhLFdBQWIsRUFBMEJYLFNBQTFCO0FBQ0FiLGNBQVV3QixFQUFWLENBQWEsU0FBYixFQUF3QkosT0FBeEI7QUFFQSxJQVZEO0FBWUE7QUEvREssRUFBUDtBQWtFQSxDQXBFOEIsQ0FEaEMiLCJmaWxlIjoiZ3JpZHMvY2FsY3VsYXRvckdyaWQuZGlyZWN0aXZlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmFuZ3VsYXIubW9kdWxlKFwiZ3JpZHNcIilcblx0LmRpcmVjdGl2ZShcImRoQ2FsY3VsYXRvckdyaWRcIiwgW1wiJGRvY3VtZW50XCIsIGZ1bmN0aW9uICgkZG9jdW1lbnQpIHtcblx0XHRcblx0XHRyZXR1cm4ge1xuXHRcdFx0XG5cdFx0XHRyZXN0cmljdDogXCJFXCIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogXCJncmlkcy9jYWxjdWxhdG9yR3JpZC50ZW1wbGF0ZS5odG1sXCIsXG5cdFx0XHRsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGxldCBzdGFydFggPSAwO1xuXHRcdFx0XHRsZXQgc3RhcnRZID0gMDtcblx0XHRcdFx0bGV0IHggPSAwO1xuXHRcdFx0XHRsZXQgeSA9IDA7XG5cdFx0XHRcdFxuXHRcdFx0XHRsZXQgYm9hcmQgPSBlbGVtZW50LmZpbmQoXCJkaC1ib2FyZC1ncmlkXCIpO1xuXHRcdFx0XHRcblx0XHRcdFx0ZnVuY3Rpb24gbW91c2Vtb3ZlIChldmVudCkge1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdHkgPSBldmVudC5wYWdlWSAtIHN0YXJ0WTtcblx0XHRcdFx0XHR4ID0gZXZlbnQucGFnZVggLSBzdGFydFg7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0ZWxlbWVudC5jc3Moe1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHR0b3A6IHkgKyBcInB4XCIsXG5cdFx0XHRcdFx0XHRsZWZ0OiB4ICsgXCJweFwiXG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0ZnVuY3Rpb24gbW91c2V1cCAoKSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0JGRvY3VtZW50Lm9mZihcIm1vdXNlbW92ZVwiLCBtb3VzZW1vdmUpO1xuXHRcdFx0XHRcdCRkb2N1bWVudC5vZmYoXCJtb3VzZXVwXCIsIG1vdXNldXApO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRib2FyZC5jc3Moe1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGN1cnNvcjogXCJwb2ludGVyXCJcblx0XHRcdFx0XHRcblx0XHRcdFx0fSk7XG5cdFx0XHRcdFxuXHRcdFx0XHRlbGVtZW50LmNzcyh7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0LyoqXG5cdFx0XHRcdFx0ICogTXVzdCBtYWtlIHRoZSBwb3NpdGlvbiBvZiB0aGUgZWxlbWVudCByZWxhdGl2ZSBmb3IgdGhlXG5cdFx0XHRcdFx0ICogcmVzaXppbmcgdG8gb2NjdXIuIEl0IGlzIGEgZGlyZWN0IHN0eWxlIGRlY2xhcmF0aW9uIG9uXG5cdFx0XHRcdFx0ICogdGhlIERPTSBlbGVtZW50LCBub3QgdGhyb3VnaCBhIGNsYXNzLlxuXHRcdFx0XHRcdCAqL1xuXHRcdFx0XHRcdHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG5cdFx0XHRcdFx0XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ym9hcmQub24oXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRzdGFydFggPSBldmVudC5wYWdlWCAtIHg7XG5cdFx0XHRcdFx0c3RhcnRZID0gZXZlbnQucGFnZVkgLSB5O1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdCRkb2N1bWVudC5vbihcIm1vdXNlbW92ZVwiLCBtb3VzZW1vdmUpO1xuXHRcdFx0XHRcdCRkb2N1bWVudC5vbihcIm1vdXNldXBcIiwgbW91c2V1cCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcblx0XHRcdH1cblx0XHR9O1xuXHRcdFxuXHR9XSk7XG4iXX0=
