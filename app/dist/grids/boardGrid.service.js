"use strict";

angular.module("grids").service("BoardGridService", function () {

	var emptyBoard = true;

	var numberStack = [];

	var currentNumber = null;
	var currentOperation = null;
	var currentOperationResult = null;

	var inputDirty = false;

	if (emptyBoard) {

		currentNumber = "0";
	}

	this.appendDigit = function (digit) {

		if (emptyBoard) {

			currentNumber = "";
			emptyBoard = false;
		}

		if (!inputDirty) {

			currentNumber = "";
		}

		currentNumber += digit;
		inputDirty = true;
	};

	this.getCurrentNumber = function () {

		return currentNumber;
	};

	var executeOperation = function executeOperation() {

		console.log("Executing " + currentOperation);

		var a = numberStack.shift();
		var b = numberStack.shift();

		switch (currentOperation) {

			case "addition":
				currentOperationResult = a + b;
				break;
			case "subtraction":
				currentOperationResult = a - b;
				break;
			case "multiplication":
				currentOperationResult = a * b;
				break;
			case "division":
				currentOperationResult = a / b;
				break;
			default:
				console.log("Operation has not been created.");

		}

		currentNumber = currentOperationResult;
	};

	this.setCurrentOperation = function (op) {

		if (op === "resultant") {

			if (numberStack === 2) {

				executeOperation();

				numberStack.push(parseInt(currentNumber));

				console.log(numberStack);

				inputDirty = false;
			}
		}

		// If there is nothing in numberStack & there is no input, do nothing
		// If there is nothing in numberStack & there is input, define an operation

		if (numberStack.length === 0 && !inputDirty) {

			console.log("There is nothing to operate on");
		} else if (numberStack.length === 0 && inputDirty) {

			console.log("There is something to put in the stack!");

			currentOperation = op;

			numberStack.push(parseInt(currentNumber));
			console.log(numberStack);
			inputDirty = false;
		}

		// If there is one element in numberStack & there is no input,
		// define an operation or allow to switch operations
		// If there is one element in numberStack & there is input,
		// push the input into numberStack

		if (numberStack.length === 1 && !inputDirty) {

			console.log("There is an element in the stack");
			currentOperation = op;
			console.log(currentOperation);
		} else if (numberStack.length === 1 && inputDirty) {

			numberStack.push(parseInt(currentNumber));
			console.log(numberStack);
			inputDirty = false;

			// This will make the execution block to run.
			// The operation that was assigned to trigger the execution
			// will be stored after the execution is done as it will
			// leave one element in the stack ready to an operation
		}

		// If there are two elements in numberStack,
		// execute the current operation

		if (numberStack.length == 2) {

			console.log("Execute Operation");

			executeOperation();

			// Operation is complete. Add result to numberStack

			numberStack.push(parseInt(currentNumber));

			console.log(numberStack);

			currentOperation = op;
			console.log(currentOperation);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdyaWRzL2JvYXJkR3JpZC5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJzZXJ2aWNlIiwiZW1wdHlCb2FyZCIsIm51bWJlclN0YWNrIiwiY3VycmVudE51bWJlciIsImN1cnJlbnRPcGVyYXRpb24iLCJjdXJyZW50T3BlcmF0aW9uUmVzdWx0IiwiaW5wdXREaXJ0eSIsImFwcGVuZERpZ2l0IiwiZGlnaXQiLCJnZXRDdXJyZW50TnVtYmVyIiwiZXhlY3V0ZU9wZXJhdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJhIiwic2hpZnQiLCJiIiwic2V0Q3VycmVudE9wZXJhdGlvbiIsIm9wIiwicHVzaCIsInBhcnNlSW50IiwibGVuZ3RoIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQUEsUUFBUUMsTUFBUixDQUFlLE9BQWYsRUFDRUMsT0FERixDQUNVLGtCQURWLEVBQzhCLFlBQVk7O0FBRXhDLEtBQUlDLGFBQWEsSUFBakI7O0FBRUEsS0FBSUMsY0FBYyxFQUFsQjs7QUFFQSxLQUFJQyxnQkFBZ0IsSUFBcEI7QUFDQSxLQUFJQyxtQkFBbUIsSUFBdkI7QUFDQSxLQUFJQyx5QkFBeUIsSUFBN0I7O0FBRUEsS0FBSUMsYUFBYSxLQUFqQjs7QUFHQSxLQUFJTCxVQUFKLEVBQWdCOztBQUVmRSxrQkFBZ0IsR0FBaEI7QUFFQTs7QUFHRCxNQUFLSSxXQUFMLEdBQW1CLFVBQVVDLEtBQVYsRUFBaUI7O0FBRW5DLE1BQUlQLFVBQUosRUFBZ0I7O0FBRWZFLG1CQUFnQixFQUFoQjtBQUNBRixnQkFBYSxLQUFiO0FBRUE7O0FBRUQsTUFBSSxDQUFDSyxVQUFMLEVBQWlCOztBQUVoQkgsbUJBQWdCLEVBQWhCO0FBRUE7O0FBRURBLG1CQUFpQkssS0FBakI7QUFDQUYsZUFBYSxJQUFiO0FBRUEsRUFsQkQ7O0FBb0JBLE1BQUtHLGdCQUFMLEdBQXdCLFlBQVk7O0FBRW5DLFNBQU9OLGFBQVA7QUFFQSxFQUpEOztBQU1BLEtBQUlPLG1CQUFtQixTQUFuQkEsZ0JBQW1CLEdBQVk7O0FBRWxDQyxVQUFRQyxHQUFSLGdCQUF5QlIsZ0JBQXpCOztBQUVBLE1BQUlTLElBQUlYLFlBQVlZLEtBQVosRUFBUjtBQUNBLE1BQUlDLElBQUliLFlBQVlZLEtBQVosRUFBUjs7QUFFQSxVQUFRVixnQkFBUjs7QUFFQyxRQUFLLFVBQUw7QUFDQ0MsNkJBQXlCUSxJQUFJRSxDQUE3QjtBQUNBO0FBQ0QsUUFBSyxhQUFMO0FBQ0NWLDZCQUF5QlEsSUFBSUUsQ0FBN0I7QUFDQTtBQUNELFFBQUssZ0JBQUw7QUFDQ1YsNkJBQXlCUSxJQUFJRSxDQUE3QjtBQUNBO0FBQ0QsUUFBSyxVQUFMO0FBQ0NWLDZCQUF5QlEsSUFBSUUsQ0FBN0I7QUFDQTtBQUNEO0FBQ0NKLFlBQVFDLEdBQVI7O0FBZkY7O0FBbUJBVCxrQkFBZ0JFLHNCQUFoQjtBQUVBLEVBNUJEOztBQStCQSxNQUFLVyxtQkFBTCxHQUEyQixVQUFVQyxFQUFWLEVBQWM7O0FBRXhDLE1BQUlBLE9BQU8sV0FBWCxFQUF3Qjs7QUFFdkIsT0FBSWYsZ0JBQWdCLENBQXBCLEVBQXVCOztBQUV0QlE7O0FBRUFSLGdCQUFZZ0IsSUFBWixDQUFpQkMsU0FBU2hCLGFBQVQsQ0FBakI7O0FBRUFRLFlBQVFDLEdBQVIsQ0FBWVYsV0FBWjs7QUFFQUksaUJBQWEsS0FBYjtBQUVBO0FBRUQ7O0FBRUQ7QUFDQTs7QUFFQSxNQUFJSixZQUFZa0IsTUFBWixLQUF1QixDQUF2QixJQUE0QixDQUFDZCxVQUFqQyxFQUE2Qzs7QUFFNUNLLFdBQVFDLEdBQVIsQ0FBWSxnQ0FBWjtBQUVBLEdBSkQsTUFJTyxJQUFJVixZQUFZa0IsTUFBWixLQUF1QixDQUF2QixJQUE0QmQsVUFBaEMsRUFBNEM7O0FBRWxESyxXQUFRQyxHQUFSLENBQVkseUNBQVo7O0FBRUFSLHNCQUFtQmEsRUFBbkI7O0FBRUFmLGVBQVlnQixJQUFaLENBQWlCQyxTQUFTaEIsYUFBVCxDQUFqQjtBQUNBUSxXQUFRQyxHQUFSLENBQVlWLFdBQVo7QUFDQUksZ0JBQWEsS0FBYjtBQUVBOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQUlKLFlBQVlrQixNQUFaLEtBQXVCLENBQXZCLElBQTRCLENBQUNkLFVBQWpDLEVBQTZDOztBQUU1Q0ssV0FBUUMsR0FBUixDQUFZLGtDQUFaO0FBQ0FSLHNCQUFtQmEsRUFBbkI7QUFDQU4sV0FBUUMsR0FBUixDQUFZUixnQkFBWjtBQUVBLEdBTkQsTUFNTyxJQUFJRixZQUFZa0IsTUFBWixLQUF1QixDQUF2QixJQUE0QmQsVUFBaEMsRUFBNEM7O0FBRWxESixlQUFZZ0IsSUFBWixDQUFpQkMsU0FBU2hCLGFBQVQsQ0FBakI7QUFDQVEsV0FBUUMsR0FBUixDQUFZVixXQUFaO0FBQ0FJLGdCQUFhLEtBQWI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFRDtBQUNBOztBQUVBLE1BQUlKLFlBQVlrQixNQUFaLElBQXNCLENBQTFCLEVBQTZCOztBQUU1QlQsV0FBUUMsR0FBUixDQUFZLG1CQUFaOztBQUVBRjs7QUFFQTs7QUFFQVIsZUFBWWdCLElBQVosQ0FBaUJDLFNBQVNoQixhQUFULENBQWpCOztBQUVBUSxXQUFRQyxHQUFSLENBQVlWLFdBQVo7O0FBRUFFLHNCQUFtQmEsRUFBbkI7QUFDQU4sV0FBUUMsR0FBUixDQUFZUixnQkFBWjtBQUVBO0FBRUQsRUFqRkQ7QUFtRkEsQ0FqS0YiLCJmaWxlIjoiZ3JpZHMvYm9hcmRHcmlkLnNlcnZpY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuYW5ndWxhci5tb2R1bGUoXCJncmlkc1wiKVxuXHQuc2VydmljZShcIkJvYXJkR3JpZFNlcnZpY2VcIiwgZnVuY3Rpb24gKCkge1xuXHRcdFxuXHRcdGxldCBlbXB0eUJvYXJkID0gdHJ1ZTtcblx0XHRcblx0XHRsZXQgbnVtYmVyU3RhY2sgPSBbXTtcblx0XHRcblx0XHRsZXQgY3VycmVudE51bWJlciA9IG51bGw7XG5cdFx0bGV0IGN1cnJlbnRPcGVyYXRpb24gPSBudWxsO1xuXHRcdGxldCBjdXJyZW50T3BlcmF0aW9uUmVzdWx0ID0gbnVsbDtcblx0XHRcblx0XHRsZXQgaW5wdXREaXJ0eSA9IGZhbHNlO1xuXHRcdFxuXHRcdFxuXHRcdGlmIChlbXB0eUJvYXJkKSB7XG5cdFx0XHRcblx0XHRcdGN1cnJlbnROdW1iZXIgPSBcIjBcIjtcblx0XHRcdFxuXHRcdH1cblx0XHRcblx0XHRcblx0XHR0aGlzLmFwcGVuZERpZ2l0ID0gZnVuY3Rpb24gKGRpZ2l0KSB7XG5cdFx0XHRcblx0XHRcdGlmIChlbXB0eUJvYXJkKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRjdXJyZW50TnVtYmVyID0gXCJcIjtcblx0XHRcdFx0ZW1wdHlCb2FyZCA9IGZhbHNlO1xuXHRcdFx0XHRcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYgKCFpbnB1dERpcnR5KSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRjdXJyZW50TnVtYmVyID0gXCJcIjtcblx0XHRcdFx0XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGN1cnJlbnROdW1iZXIgKz0gZGlnaXQ7XG5cdFx0XHRpbnB1dERpcnR5ID0gdHJ1ZTtcblx0XHRcdFxuXHRcdH07XG5cdFx0XG5cdFx0dGhpcy5nZXRDdXJyZW50TnVtYmVyID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRyZXR1cm4gY3VycmVudE51bWJlcjtcblxuXHRcdH07XG5cdFx0XG5cdFx0bGV0IGV4ZWN1dGVPcGVyYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcblx0XHRcdGNvbnNvbGUubG9nKGBFeGVjdXRpbmcgJHtjdXJyZW50T3BlcmF0aW9ufWApO1xuXHRcdFx0XG5cdFx0XHRsZXQgYSA9IG51bWJlclN0YWNrLnNoaWZ0KCk7XG5cdFx0XHRsZXQgYiA9IG51bWJlclN0YWNrLnNoaWZ0KCk7XG5cdFx0XHRcblx0XHRcdHN3aXRjaCAoY3VycmVudE9wZXJhdGlvbikge1xuXHRcdFx0XHRcblx0XHRcdFx0Y2FzZSBcImFkZGl0aW9uXCI6XG5cdFx0XHRcdFx0Y3VycmVudE9wZXJhdGlvblJlc3VsdCA9IGEgKyBiO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwic3VidHJhY3Rpb25cIjpcblx0XHRcdFx0XHRjdXJyZW50T3BlcmF0aW9uUmVzdWx0ID0gYSAtIGI7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJtdWx0aXBsaWNhdGlvblwiOlxuXHRcdFx0XHRcdGN1cnJlbnRPcGVyYXRpb25SZXN1bHQgPSBhICogYjtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcImRpdmlzaW9uXCI6XG5cdFx0XHRcdFx0Y3VycmVudE9wZXJhdGlvblJlc3VsdCA9IGEgLyBiO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGBPcGVyYXRpb24gaGFzIG5vdCBiZWVuIGNyZWF0ZWQuYCk7XG5cdFx0XHRcdFx0XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGN1cnJlbnROdW1iZXIgPSBjdXJyZW50T3BlcmF0aW9uUmVzdWx0O1xuXHRcdFx0XG5cdFx0fTtcblx0XHRcblx0XHRcblx0XHR0aGlzLnNldEN1cnJlbnRPcGVyYXRpb24gPSBmdW5jdGlvbiAob3ApIHtcblx0XHRcdFxuXHRcdFx0aWYgKG9wID09PSBcInJlc3VsdGFudFwiKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAobnVtYmVyU3RhY2sgPT09IDIpIHtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRleGVjdXRlT3BlcmF0aW9uKCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0bnVtYmVyU3RhY2sucHVzaChwYXJzZUludChjdXJyZW50TnVtYmVyKSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29uc29sZS5sb2cobnVtYmVyU3RhY2spO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlucHV0RGlydHkgPSBmYWxzZTtcblx0XHRcdFx0XHRcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gSWYgdGhlcmUgaXMgbm90aGluZyBpbiBudW1iZXJTdGFjayAmIHRoZXJlIGlzIG5vIGlucHV0LCBkbyBub3RoaW5nXG5cdFx0XHQvLyBJZiB0aGVyZSBpcyBub3RoaW5nIGluIG51bWJlclN0YWNrICYgdGhlcmUgaXMgaW5wdXQsIGRlZmluZSBhbiBvcGVyYXRpb25cblx0XHRcdFxuXHRcdFx0aWYgKG51bWJlclN0YWNrLmxlbmd0aCA9PT0gMCAmJiAhaW5wdXREaXJ0eSkge1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coXCJUaGVyZSBpcyBub3RoaW5nIHRvIG9wZXJhdGUgb25cIik7XG5cdFx0XHRcdFxuXHRcdFx0fSBlbHNlIGlmIChudW1iZXJTdGFjay5sZW5ndGggPT09IDAgJiYgaW5wdXREaXJ0eSkge1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coXCJUaGVyZSBpcyBzb21ldGhpbmcgdG8gcHV0IGluIHRoZSBzdGFjayFcIik7XG5cdFx0XHRcdFxuXHRcdFx0XHRjdXJyZW50T3BlcmF0aW9uID0gb3A7XG5cdFx0XHRcdFxuXHRcdFx0XHRudW1iZXJTdGFjay5wdXNoKHBhcnNlSW50KGN1cnJlbnROdW1iZXIpKTtcblx0XHRcdFx0Y29uc29sZS5sb2cobnVtYmVyU3RhY2spO1xuXHRcdFx0XHRpbnB1dERpcnR5ID0gZmFsc2U7XG5cdFx0XHRcdFxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBJZiB0aGVyZSBpcyBvbmUgZWxlbWVudCBpbiBudW1iZXJTdGFjayAmIHRoZXJlIGlzIG5vIGlucHV0LFxuXHRcdFx0Ly8gZGVmaW5lIGFuIG9wZXJhdGlvbiBvciBhbGxvdyB0byBzd2l0Y2ggb3BlcmF0aW9uc1xuXHRcdFx0Ly8gSWYgdGhlcmUgaXMgb25lIGVsZW1lbnQgaW4gbnVtYmVyU3RhY2sgJiB0aGVyZSBpcyBpbnB1dCxcblx0XHRcdC8vIHB1c2ggdGhlIGlucHV0IGludG8gbnVtYmVyU3RhY2tcblx0XHRcdFxuXHRcdFx0aWYgKG51bWJlclN0YWNrLmxlbmd0aCA9PT0gMSAmJiAhaW5wdXREaXJ0eSkge1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coXCJUaGVyZSBpcyBhbiBlbGVtZW50IGluIHRoZSBzdGFja1wiKTtcblx0XHRcdFx0Y3VycmVudE9wZXJhdGlvbiA9IG9wO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhjdXJyZW50T3BlcmF0aW9uKTtcblx0XHRcdFx0XG5cdFx0XHR9IGVsc2UgaWYgKG51bWJlclN0YWNrLmxlbmd0aCA9PT0gMSAmJiBpbnB1dERpcnR5KSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRudW1iZXJTdGFjay5wdXNoKHBhcnNlSW50KGN1cnJlbnROdW1iZXIpKTtcblx0XHRcdFx0Y29uc29sZS5sb2cobnVtYmVyU3RhY2spO1xuXHRcdFx0XHRpbnB1dERpcnR5ID0gZmFsc2U7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBUaGlzIHdpbGwgbWFrZSB0aGUgZXhlY3V0aW9uIGJsb2NrIHRvIHJ1bi5cblx0XHRcdFx0Ly8gVGhlIG9wZXJhdGlvbiB0aGF0IHdhcyBhc3NpZ25lZCB0byB0cmlnZ2VyIHRoZSBleGVjdXRpb25cblx0XHRcdFx0Ly8gd2lsbCBiZSBzdG9yZWQgYWZ0ZXIgdGhlIGV4ZWN1dGlvbiBpcyBkb25lIGFzIGl0IHdpbGxcblx0XHRcdFx0Ly8gbGVhdmUgb25lIGVsZW1lbnQgaW4gdGhlIHN0YWNrIHJlYWR5IHRvIGFuIG9wZXJhdGlvblxuXHRcdFx0XHRcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gSWYgdGhlcmUgYXJlIHR3byBlbGVtZW50cyBpbiBudW1iZXJTdGFjayxcblx0XHRcdC8vIGV4ZWN1dGUgdGhlIGN1cnJlbnQgb3BlcmF0aW9uXG5cdFx0XHRcblx0XHRcdGlmIChudW1iZXJTdGFjay5sZW5ndGggPT0gMikge1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc29sZS5sb2coXCJFeGVjdXRlIE9wZXJhdGlvblwiKTtcblx0XHRcdFx0XG5cdFx0XHRcdGV4ZWN1dGVPcGVyYXRpb24oKTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIE9wZXJhdGlvbiBpcyBjb21wbGV0ZS4gQWRkIHJlc3VsdCB0byBudW1iZXJTdGFja1xuXHRcdFx0XHRcblx0XHRcdFx0bnVtYmVyU3RhY2sucHVzaChwYXJzZUludChjdXJyZW50TnVtYmVyKSk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zb2xlLmxvZyhudW1iZXJTdGFjayk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjdXJyZW50T3BlcmF0aW9uID0gb3A7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGN1cnJlbnRPcGVyYXRpb24pO1xuXHRcdFx0XHRcblx0XHRcdH1cblx0XHRcdFxuXHRcdH07XG5cdFx0XG5cdH0pOyJdfQ==
